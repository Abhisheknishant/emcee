
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>emcee &mdash; emcee 1.2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="emcee 1.2.0 documentation" href="#" />
    <link rel="next" title="Installation" href="user/install/" />
     
    
    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    <script type="text/javascript" src="//use.typekit.com/phg8fgl.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

    <link href="http://fonts.googleapis.com/css?family=Alegreya:400italic,700italic,400,700|Alegreya+SC:400,700" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="_static/favicon.png">


  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="user/install/" title="Installation"
             accesskey="N">next</a> |</li>
        <li><a href="#">emcee 1.2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="emcee">
<h1>emcee<a class="headerlink" href="#emcee" title="Permalink to this headline">¶</a></h1>
<div class="section" id="seriously-kick-ass-mcmc">
<h2>Seriously Kick-Ass MCMC<a class="headerlink" href="#seriously-kick-ass-mcmc" title="Permalink to this headline">¶</a></h2>
<p>Once upon a time, there was
<a href="http://en.wikipedia.org/wiki/Metropolis%E2%80%93Hastings_algorithm">an
algorithm</a>. This algorithm became very popular but it turned out that
there were better ones.
<a href="http://msp.berkeley.edu/camcos/2010/5-1/p04.xhtml">Some folks</a>
came up with a better one and <a href="http://danfm.ca">some</a>
<a href="http://www.astro.princeton.edu/~dstn">other</a>
<a href="http://cosmo.nyu.edu/hogg">folks</a> implemented it in Python.
It's a little crazy how much it rocks.</p><p><tt class="docutils literal"><span class="pre">emcee</span></tt> is a GPLv2 licensed pure-Python implementation of Goodman &amp; Weare&#8217;s
<a class="reference external" href="http://msp.berkeley.edu/camcos/2010/5-1/p04.xhtml">Affine Invariant Markov chain Monte Carlo (MCMC) Ensemble sampler</a> and these pages will
show you how to use it.</p>
<p>This documentation won&#8217;t teach you too much about MCMC but there are a lot
of resources available for that (try <a class="reference external" href="http://www.inference.phy.cam.ac.uk/mackay/itila/book.html">this one</a>). We also
posted <a class="reference external" href="http://arxiv.org/abs/1202.3665">a paper</a> to the arXiv explaining
the <tt class="docutils literal"><span class="pre">emcee</span></tt> algorithm in much greater detail.</p>
</div>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>If you wanted to draw samples from a 10 dimensional Gaussian, you would do
something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">emcee</span>

<span class="k">def</span> <span class="nf">lnprob</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ivar</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">ivar</span> <span class="o">*</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">ndim</span><span class="p">,</span> <span class="n">nwalkers</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span>
<span class="n">ivar</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">ndim</span><span class="p">)</span>
<span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">ndim</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nwalkers</span><span class="p">)]</span>

<span class="n">sampler</span> <span class="o">=</span> <span class="n">emcee</span><span class="o">.</span><span class="n">EnsembleSampler</span><span class="p">(</span><span class="n">nwalkers</span><span class="p">,</span> <span class="n">ndim</span><span class="p">,</span> <span class="n">lnprob</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">ivar</span><span class="p">])</span>
<span class="n">sampler</span><span class="o">.</span><span class="n">run_mcmc</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testimonials">
<span id="id1"></span><h2>Testimonials<a class="headerlink" href="#testimonials" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>&#8220;My research—modeling strong gravitational lenses with 10-20 free
parameters—would be very difficult or impossible without emcee.&#8221;</p>
<p class="attribution">&mdash;Shane Bussmann (CfA)</p>
</div></blockquote>
<p>Since the initial release, <tt class="docutils literal"><span class="pre">emcee</span></tt> has been used in many published
scientific studies. Here is an incomplete list:</p>
<ul class="simple">
<li><a class="reference external" href="http://arxiv.org/abs/1204.4455">Dorman, Guhathakurta, Fardal, et al. (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1204.2374">Olofsson, Juhász, Henning, et al. (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1111.1724">Bovy, Rix, Liu, et al. (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1103.6038">Lang &amp; Hogg (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1202.2819">Bovy, Rix, Hogg, et al. (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1207.2724">Bussmann, Gurwell, Fu, et al. (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1207.3795">Brammer, Sánchez-Janssen, Labbé, et al. (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1209.1641">Brown, Rosenfeld, Andrews, et al. (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1209.0759">Bovy, Allende Prieto, Beers, et al. (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1211.1982">Roškar, Debattista, &amp; Loebman (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1210.4836">Crossfield, Barman, Hansen, et al. (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1206.1568">Morton (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1211.6055">Monnier, Che, Zhao, et al. (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1212.1011">Huppenkothen, Watts, Uttley, et al. (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1211.4510">Cieza, Olofsson, Harvey, et al. (2013)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1211.6105">Weisz, Fouesneau, Hogg, et al. (2013)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1208.3277">Reis, Miller, Reynolds, et al. (2013)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1212.1259">Sanders, &amp; Fabian (2013)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1212.1721">Akeret, Seehars, Amara, et al. (2012)</a></li>
<li><a class="reference external" href="http://arxiv.org/abs/1304.4256">Riechers, Bradford, Clements, et al. (2013)</a></li>
</ul>
<p>Please <a class="reference external" href="mailto:danfm&#37;&#52;&#48;nyu&#46;edu">let us know</a> if your work should be included
in this list or <a class="reference external" href="https://github.com/dfm/emcee">fork the repository</a> and add
it yourself.</p>
</div>
<div class="section" id="user-guide">
<h2>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="user/install/">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/install/#using-pip">Using pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/install/#from-source">From source</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/install/#bleeding-edge-development-version">Bleeding edge development version</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/install/#test-the-installation">Test the installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/quickstart/">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/quickstart/#how-to-sample-a-multi-dimensional-gaussian">How to sample a multi-dimensional Gaussian</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/advanced/">Advanced Patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/advanced/#incrementally-saving-progress">Incrementally saving progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/advanced/#multiprocessing">Multiprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/advanced/#arbitrary-metadata-blobs">Arbitrary metadata blobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/advanced/#using-mpi-to-distribute-the-computations">Using MPI to distribute the computations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/pt/">Parallel-Tempering Ensemble MCMC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/pt/#how-to-sample-a-multi-modal-gaussian">How To Sample a Multi-Modal Gaussian</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/pt/#implementation-notes">Implementation Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/faq/">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/faq/#what-are-walkers">What are &#8220;walkers&#8221;?</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/faq/#how-should-i-initialize-the-walkers">How should I initialize the walkers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/faq/#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/faq/#attribution">Attribution</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="api-documentation">
<h2>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/#the-affine-invariant-ensemble-sampler">The Affine-Invariant Ensemble Sampler</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#the-parallel-tempered-ensemble-sampler">The Parallel-Tempered Ensemble Sampler</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#standard-metropolis-hastings-sampler">Standard Metropolis-Hastings Sampler</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#abstract-sampler-object">Abstract Sampler Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#utilities">Utilities</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="contributors">
<h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h2>
<p>Author:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/dfm">Dan Foreman-Mackey (NYU)</a></li>
</ul>
<p>Direct contributions to the code base:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/aconley">Alex Conley (U Colorado, Boulder)</a></li>
<li><a class="reference external" href="https://github.com/farr">Will Meierjurgen Farr (Northwestern)</a></li>
<li><a class="reference external" href="https://github.com/davidwhogg">David W. Hogg (NYU)</a></li>
<li><a class="reference external" href="https://github.com/dstndstn">Dustin Lang (Princeton/CMU)</a></li>
<li><a class="reference external" href="https://github.com/drphilmarshall">Phil Marshall (Oxford)</a></li>
<li><a class="reference external" href="https://github.com/adrn">Adrian Price-Whelan (Columbia)</a></li>
<li><a class="reference external" href="https://github.com/jeremysanders">Jeremy Sanders (Cambridge)</a></li>
<li><a class="reference external" href="https://github.com/joezuntz">Joe Zuntz (Oxford)</a></li>
</ul>
<p>Comments, corrections &amp; suggestions:</p>
<ul class="simple">
<li>Eric Agol (UWash)</li>
<li>Jo Bovy (IAS)</li>
<li>Jacqueline Chen (MIT)</li>
<li>John Gizis (Delaware)</li>
<li>Jonathan Goodman (NYU)</li>
<li>Jennifer Piscionere (Vanderbilt)</li>
</ul>
</div>
<div class="section" id="changelog">
<h2>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h2>
<div class="section" id="upcoming">
<h3>1.2.1 (upcoming)<a class="headerlink" href="#upcoming" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added checks for parameters becoming infinite or NaN.</li>
<li>Added checks for log-probability becoming NaN.</li>
</ul>
</div>
<div class="section" id="id2">
<h3>1.2.0 (2013-01-30)<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a parallel tempering sampler <tt class="docutils literal"><span class="pre">PTSampler</span></tt>.</li>
<li>Added instructions and utilities for using <tt class="docutils literal"><span class="pre">emcee</span></tt> with <tt class="docutils literal"><span class="pre">MPI</span></tt>.</li>
<li>Added <tt class="docutils literal"><span class="pre">flatlnprobability</span></tt> property to the <tt class="docutils literal"><span class="pre">EnsembleSampler</span></tt> object
to be consistent with the <tt class="docutils literal"><span class="pre">flatchain</span></tt> property.</li>
<li>Updated document for publication in PASP.</li>
<li>Various bug fixes.</li>
</ul>
</div>
<div class="section" id="id3">
<h3>1.1.3 (2012-11-22)<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Made the packaging system more robust even when numpy is not installed.</li>
</ul>
</div>
<div class="section" id="id4">
<h3>1.1.2 (2012-08-06)<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Another bug fix related to metadata blobs: the shape of the final <tt class="docutils literal"><span class="pre">blobs</span></tt>
object was incorrect and all of the entries would generally be identical
because we needed to copy the list that was appended at each step. Thanks
goes to Jacqueline Chen (MIT) for catching this problem.</li>
</ul>
</div>
<div class="section" id="id5">
<h3>1.1.1 (2012-07-30)<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed bug related to metadata blobs. The sample function was yielding
the <tt class="docutils literal"><span class="pre">blobs</span></tt> object even when it wasn&#8217;t expected.</li>
</ul>
</div>
<div class="section" id="id6">
<h3>1.1.0 (2012-07-28)<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow the <tt class="docutils literal"><span class="pre">lnprobfn</span></tt> to return arbitrary &#8220;blobs&#8221; of data as well as the
log-probability.</li>
<li>Python 3 compatible (thanks Alex Conley)!</li>
<li>Various speed ups and clean ups in the core code base.</li>
<li>New documentation with better examples and more discussion.</li>
</ul>
</div>
<div class="section" id="id7">
<h3>1.0.1 (2012-03-31)<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed transpose bug in the usage of <tt class="docutils literal"><span class="pre">acor</span></tt> in <tt class="docutils literal"><span class="pre">EnsembleSampler</span></tt>.</li>
</ul>
</div>
<div class="section" id="id8">
<h3>1.0.0 (2012-02-15)<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Initial release.</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo">
  <a href="#">
    <img class="logo" src="_static/logo-sidebar.png" alt="Logo"/>
  </a>
</p>

<p>
    emcee is an extensible, pure-Python implementation of
    Goodman &amp; Weare's
    <a href="http://msp.berkeley.edu/camcos/2010/5-1/p04.xhtml">Affine
        Invariant Markov chain Monte Carlo (MCMC) Ensemble sampler</a>.
    It's designed for Bayesian parameter estimation and it's really sweet!
</p>


<h3>Feedback</h3>
<p>
  Feedback is greatly appreciated. If you have any questions, comments,
  issues or anything else really, <a href="mailto:danfm@nyu.edu">
  shoot me an email</a>.
</p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      &copy; Copyright 2012–2013, Dan Foreman-Mackey & contributors.
    </div>
    <a href="https://github.com/dfm/emcee" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;"
            src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
            alt="Fork me on GitHub"  class="github"/>
    </a>

    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-22909046-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
    </script>

    <script type="text/javascript">
        var _gauges = _gauges || [];
        (function() {
         var t   = document.createElement('script');
         t.type  = 'text/javascript';
         t.async = true;
         t.id    = 'gauges-tracker';
         t.setAttribute('data-site-id', '510fb7df613f5d10200000c4');
         t.src = '//secure.gaug.es/track.js';
         var s = document.getElementsByTagName('script')[0];
         s.parentNode.insertBefore(t, s);
        })();
    </script>
  </body>
</html>